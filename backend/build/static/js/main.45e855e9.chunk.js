(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{130:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(20),c=a.n(s),i=(a(86),a(87),a(9)),o=a(144),l=a(143),j=a(134),d=a(41),u=a(10),b=a(12),p=a.n(b),h=a(23),m=a(24),O=a.n(m),x="LOGIN_SUCCESS",f="LOGIN_FAIL",v="USER_LOADED_SUCCESS",g="USER_LOADED_FAIL",y="AUTHENTICATED_SUCCESS",S="AUTHENTICATED_FAIL",w="LOGOUT",_="PASSWORD_RESET_FAIL",k="PASSWORD_RESET_SUCCESS",A="PASSWORD_RESET_CONFIRM_FAIL",E="PASSWORD_RESET_CONFIRM_SUCCESS",C="DELETE_MESSAGE",N="DELETE_ERROR",I="CREATE_MESSAGE",T="CREATE_ERROR",L="SIGNUP_SUCCESS",R="SIGNUP_FAIL",D="MAGASIN_LIST_REQUEST",G="MAGASIN_LIST_SUCCESS",M="MAGASIN_LIST_FAIL",U="MAGASIN_DETAILS_REQUEST",F="MAGASIN_DETAILS_SUCCESS",P="MAGASIN_DETAILS_FAIL",z="MAGASIN_CREATE_REVIEW_REQUEST",B="MAGASIN_CREATE_REVIEW_SUCCESS",W="MAGASIN_CREATE_REVIEW_FAIL",q="MAGASIN_CREATE_REVIEW_RESET",V="DELETE_MESSAGE_MAG",J="DELETE_ERROR_MAG",H=function(){return function(){var e=Object(h.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,O.a.get("".concat("http://localhost:8000","/auth/users/me/"),a);case 5:r=e.sent,t({type:v,payload:r.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:g});case 12:e.next=15;break;case 14:t({type:g});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},Q=function(){return function(e){e({type:C})}},Z=function(){return function(e){e({type:N})}},K=function(e){return function(t){t({type:I,payload:e})}},X=function(e){return function(t){t({type:T,payload:e})}},Y=a(13),$=a(141),ee=a(133),te=a(1);var ae=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],s=Object(Y.k)();return Object(te.jsxs)($.a,{onSubmit:function(e){e.preventDefault(),a?s.push("/?keyword=".concat(a,"&page=1")):s.push(s.push(s.location.pathname))},inline:!0,children:[Object(te.jsx)($.a.Control,{type:"text",name:"q",onChange:function(e){return n(e.target.value)},className:"mr-sm-2 ml-sm-5"}),Object(te.jsx)(ee.a,{type:"submit",variant:"outline-success",className:"p-2",children:"Submit"})]})};var re=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(){return function(e){e({type:w})}}})((function(e){var t=e.logout,a=e.isAuthenticated,n=e.user,s=Object(r.useState)(!1),c=Object(i.a)(s,2),u=c[0],b=c[1],p=function(){t(),b(!0)};return Object(te.jsxs)("header",{children:[Object(te.jsx)(l.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(te.jsxs)(j.a,{children:[Object(te.jsx)(d.LinkContainer,{to:"/",children:Object(te.jsx)(l.a.Brand,{children:"ShopsDz"})}),Object(te.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(te.jsxs)(l.a.Collapse,{className:"justify-content-start",children:[Object(te.jsx)(ae,{}),Object(te.jsx)(o.a,{className:"ml-auto",children:a?Object(te.jsxs)(r.Fragment,{className:"nav ml-auto",children:[Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsxs)("a",{className:"nav-link",href:"#!",children:[Object(te.jsx)("i",{class:"fas fa-user"}),n?n.username:""]})}),Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsxs)("a",{className:"nav-link",href:"/",onClick:p,children:[Object(te.jsx)("i",{class:"fas fa-sign-out-alt"}),"Logout"]})})]}):Object(te.jsxs)(r.Fragment,{className:"nav ml-auto",children:[Object(te.jsx)("li",{className:"nav-item ",children:Object(te.jsx)(d.LinkContainer,{to:"/login",children:Object(te.jsxs)(o.a.Link,{children:[Object(te.jsx)("i",{className:"fas fa-user"}),"Se connecter"]})})}),Object(te.jsx)("li",{className:"nav-item",children:Object(te.jsx)(d.LinkContainer,{to:"/signup",children:Object(te.jsxs)(o.a.Link,{children:[Object(te.jsx)("i",{class:"fas fa-user-plus"}),"S'inscrire"]})})})]})})]})]})}),u?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsx)(r.Fragment,{})]})})),ne=a(135),se=a(72);var ce=function(){return Object(te.jsx)("footer",{className:" my-0 bg-dark text-white",children:Object(te.jsx)(j.a,{bg:"dark",variant:"dark",expand:"lg",children:Object(te.jsx)(ne.a,{bg:"dark",children:Object(te.jsx)(se.a,{className:"text-center py-3",bg:"dark",children:"Copyright \xa9 ShopsDZ"})})})})},ie=a(146);var oe=function(e){var t=e.value,a=e.text,r=e.color;return Object(te.jsxs)("div",{className:"rating",children:[Object(te.jsx)("span",{children:Object(te.jsx)("i",{style:{color:r},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(te.jsx)("span",{children:Object(te.jsx)("i",{style:{color:r},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(te.jsx)("span",{children:Object(te.jsx)("i",{style:{color:r},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(te.jsx)("span",{children:Object(te.jsx)("i",{style:{color:r},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(te.jsx)("span",{children:Object(te.jsx)("i",{style:{color:r},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(te.jsx)("span",{children:a&&a})]})},le=a(11);var je=function(e){var t=e.magasin;return Object(te.jsxs)(ie.a,{className:"my-3    rounded",children:[Object(te.jsx)(le.Link,{to:"/magasin/".concat(t._id),children:Object(te.jsx)(ie.a.Img,{variant:"top",src:"http://localhost:8000/static"+t.image})}),Object(te.jsxs)(ie.a.Body,{children:[Object(te.jsx)(le.Link,{to:"/magasin/".concat(t._id),children:Object(te.jsxs)(ie.a.Title,{as:"div",children:[Object(te.jsx)("strong",{children:t.nom}),"  ",Object(te.jsxs)("p",{children:[" ",Object(te.jsxs)("strong",{children:[" ",t.categorie]})]})]})}),Object(te.jsx)(ie.a.Text,{as:"div",children:Object(te.jsx)("div",{className:"my-3",children:Object(te.jsx)(oe,{value:t.rating,text:"".concat(t.numReviews," avis"),color:"#f8e825"})})}),Object(te.jsx)(ie.a.Text,{as:"div",children:Object(te.jsxs)("strong",{children:[Object(te.jsx)("i",{class:"fas fa-map-marker-alt"})," ",Object(te.jsx)("p",{children:Object(te.jsxs)("strong",{children:[t.commune&&t.commune.wilaya," ",t.commune&&t.commune.nom," ",t.adresse]})})]})})]})]})},de=a(142);var ue=function(){return Object(te.jsxs)(de.a,{children:[Object(te.jsxs)(de.a.Item,{interval:5e3,style:{height:"30vw"},children:[Object(te.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-1.jpg"),alt:"First slide",style:{height:"30vw"}}),Object(te.jsxs)(de.a.Caption,{children:[Object(te.jsx)("h1",{style:{color:"silver"},children:" ShopsDZ"}),Object(te.jsx)("p",{children:"Bienvenue en Alg\xe9rie"})]})]}),Object(te.jsx)(de.a.Item,{interval:5e3,style:{height:"30vw"},children:Object(te.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-2.jpg"),alt:"Second slide",style:{height:"30vw"}})}),Object(te.jsx)(de.a.Item,{style:{height:"30vw"},interval:5e3,children:Object(te.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-3.jpg"),alt:"Third slide",style:{height:"30vw"}})}),Object(te.jsx)(de.a.Item,{style:{height:"30vw"},interval:5e3,children:Object(te.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-4.jpg"),alt:"Third slide",style:{height:"30vw"}})})]})},be=a(136);var pe=function(){return Object(te.jsx)(be.a,{animation:"border",role:"status",style:{height:"100px",width:"100px",margin:"auto",display:"block"},children:Object(te.jsx)("span",{className:"sr-only",children:"Loading..."})})},he=a(145);var me=function(e){var t=e.variant,a=e.children;return Object(te.jsx)(he.a,{variant:t,children:a})},Oe=a(79),xe=a(147);var fe=function(e){var t=e.pages,a=e.page,r=e.keyword,n=void 0===r?"":r;return n&&(n=n.split("?keyword=")[1].split("&")[0]),t>1&&Object(te.jsx)(xe.a,{children:Object(Oe.a)(Array(t).keys()).map((function(e){return Object(te.jsx)(d.LinkContainer,{to:"/?keyword=".concat(n,"&page=").concat(e+1),children:Object(te.jsx)(xe.a.Item,{active:e+1===a,children:e+1})},e+1)}))})};var ve=function(e){var t=e.history,a=Object(u.c)(),n=Object(u.d)((function(e){return e.magasinList})),s=n.error,c=n.loading,i=n.magasins,o=n.page,l=n.pages,j=t.location.search;return Object(r.useEffect)((function(){a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(h.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:D}),t.next=4,O.a.get("".concat("http://localhost:8000","/api/magasins/").concat(e));case 4:r=t.sent,n=r.data,a({type:G,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:M,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(j))}),[a,j]),Object(te.jsxs)("div",{children:[!j&&Object(te.jsx)(ue,{}),Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Nos magasins"}),c?Object(te.jsx)(pe,{}):s?Object(te.jsx)(me,{variant:"danger",children:s}):Object(te.jsxs)("div",{children:[Object(te.jsx)(ne.a,{children:i.map((function(e){return Object(te.jsx)(se.a,{className:"col-lg-4 d-flex align-items-stretch",sm:12,md:6,lg:4,xl:3,children:Object(te.jsx)(je,{magasin:e})},e._id)}))}),Object(te.jsx)(fe,{page:o,pages:l,keyword:j})]})]})},ge=a(138),ye=a(149),Se=a(139),we=a(140),_e=a(76),ke=a.n(_e),Ae=(a(127),a(137)),Ee=a(148);var Ce=function(e){var t=e.produit;return Object(te.jsxs)(ie.a,{className:"my-3    rounded",children:[Object(te.jsx)(ie.a.Img,{variant:"top",src:"http://localhost:8000/static"+t.produit_nom.image,style:{height:"15vw"}}),Object(te.jsxs)(ie.a.Body,{children:[Object(te.jsx)(ie.a.Title,{as:"div",children:Object(te.jsx)("strong",{children:t.produit_nom.nom})}),Object(te.jsx)(ie.a.Text,{as:"div",children:Object(te.jsxs)("strong",{children:[Object(te.jsx)("i",{class:"fas fa-money-bill-wave"})," ",Object(te.jsxs)("strong",{children:[t.prix," DA "]})]})})]})]})},Ne={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}};var Ie=Object(u.b)((function(e){return{user:e.auth.user}}),{delete_msgMag:function(){return function(e){e({type:V})}},delete_errMag:function(){return function(e){e({type:J})}}})((function(e){var t=e.match,a=e.history,n=e.user,s=e.delete_msgMag,c=e.delete_errMag,o=Object(r.useState)(0),l=Object(i.a)(o,2),j=l[0],d=l[1],b=Object(r.useState)(""),m=Object(i.a)(b,2),x=m[0],f=m[1],v=Object(u.c)(),g=Object(u.d)((function(e){return e.magasinDetails})),y=g.loading,S=g.error,w=g.magasin,_=Object(r.useState)(2),k=Object(i.a)(_,2),A=k[0],E=k[1],C=Object(u.d)((function(e){return e.magasinReviewCreate})),N=C.loading,I=C.error,T=C.success;return Object(r.useEffect)((function(){var e;a.listen((function(e){s(),c()})),v((e=t.params.id,function(){var t=Object(h.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:U}),t.next=4,O.a.get("".concat("http://localhost:8000","/api/magasins/").concat(e,"/"));case 4:r=t.sent,n=r.data,a({type:F,payload:n}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:P,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[v,t,w]),Object(te.jsxs)("div",{children:[Object(te.jsxs)(le.Link,{to:"/",children:["  ",Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Retour a la page principale"})]}),y?Object(te.jsx)(pe,{}):S?Object(te.jsx)(me,{variant:"danger",children:S}):Object(te.jsxs)("div",{children:[Object(te.jsxs)(ne.a,{children:[Object(te.jsx)(se.a,{md:7,children:Object(te.jsx)(Ae.a,{src:"http://localhost:8000/static"+w.image,alt:w.nom,fluid:!0})}),Object(te.jsx)(se.a,{md:5,children:Object(te.jsxs)(ie.a,{border:"light",style:{width:"100%"},children:[Object(te.jsx)(ie.a.Header,{children:Object(te.jsx)("h3",{children:w.nom})}),Object(te.jsxs)(ie.a.Body,{children:[Object(te.jsxs)(ie.a.Title,{children:[Object(te.jsx)("strong",{children:"Cat\xe9gorie : "}),w.categorie]}),Object(te.jsxs)(Ee.a,{variant:"flush",children:[Object(te.jsx)(Ee.a.Item,{className:"pl-0",children:Object(te.jsx)(oe,{value:w.rating,text:"".concat(w.numReviews," avis"),color:"#f8e825"})}),Object(te.jsxs)(Ee.a.Item,{className:"pl-0",children:[Object(te.jsxs)("span",{style:{color:"black"},children:[Object(te.jsx)("strong",{children:"Wilaya:"}),w.commune&&w.commune.wilaya]}),Object(te.jsx)("br",{}),Object(te.jsxs)("span",{style:{color:"black"},children:[Object(te.jsx)("strong",{children:"Comune:"})," ",w.commune&&w.commune.nom]}),Object(te.jsx)("br",{}),Object(te.jsx)("i",{class:"fas fa-map-marker-alt",children:" "})," ",Object(te.jsx)("span",{style:{color:"black"},children:Object(te.jsx)("strong",{children:w.adresse})})]}),Object(te.jsx)(Ee.a.Item,{className:"pl-0",children:Object(te.jsxs)("span",{style:{color:"black"},children:[Object(te.jsx)("i",{class:"fas fa-phone-alt"}),w.telephone]})}),Object(te.jsxs)(Ee.a.Item,{className:"pl-0",children:[Object(te.jsxs)("span",{style:{color:"black"},children:[Object(te.jsx)("i",{class:"fas fa-door-open"}),w.overture]}),Object(te.jsx)("br",{}),Object(te.jsxs)("span",{style:{color:"black"},children:[Object(te.jsx)("i",{class:"fas fa-door-closed"}),w.fermeture]})]})]})]})]})})]}),w.produits?Object(te.jsx)(ke.a,{responsive:Ne,children:w.produits.map((function(e){return Object(te.jsx)(se.a,{md:11,children:Object(te.jsx)(Ce,{produit:e})},e._id)}))}):null,Object(te.jsxs)(ge.a,{className:"my-3",center:[w.latitude?w.latitude:0,w.longitude?w.longitude:0],zoom:10,scrollWheelZoom:!1,children:[Object(te.jsx)(ye.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(te.jsx)(Se.a,{position:[w.latitude?w.latitude:0,w.longitude?w.longitude:0],children:Object(te.jsx)(we.a,{children:w.nom})})]}),Object(te.jsxs)(ne.a,{children:[Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Avis"}),Object(te.jsx)(se.a,{md:12,children:0===w.reviews.length&&Object(te.jsx)(me,{variant:"info",children:"Pas d'avis!"})}),Object(te.jsxs)(se.a,{md:6,children:[Object(te.jsxs)(Ee.a,{variant:"flush",children:[Object(te.jsxs)(Ee.a.Item,{children:[Object(te.jsx)("h4",{children:"R\xe9idiger ou modifier votre avis"}),N&&Object(te.jsx)(pe,{}),T&&Object(te.jsx)(me,{variant:"success",children:"Avis r\xe9dig\xe9"}),I&&Object(te.jsx)(me,{variant:"danger",children:I}),null!=n?Object(te.jsxs)($.a,{onSubmit:function(e){var a,r;e.preventDefault(),v((a=t.params.id,r={rating:j,comment:x},function(){var e=Object(h.a)(p.a.mark((function e(t,n){var s,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:z}),s={headers:{"Content-type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=5,O.a.post("".concat("http://localhost:8000","/api/magasins/").concat(a,"/reviews/"),r,s);case 5:c=e.sent,i=c.data,t({type:B,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:W,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(te.jsxs)($.a.Group,{controlId:"rating",children:[Object(te.jsx)($.a.Label,{children:"Note"}),Object(te.jsxs)($.a.Control,{as:"select",value:j,onChange:function(e){return d(e.target.value)},required:!0,children:[Object(te.jsx)("option",{value:"",children:"Selectionez..."}),Object(te.jsx)("option",{value:"1",children:"1 - Pauvre"}),Object(te.jsx)("option",{value:"2",children:"2 - Assez bien"}),Object(te.jsx)("option",{value:"3",children:"3 - Bien"}),Object(te.jsx)("option",{value:"4",children:"4 - Tr\xe8s Bien"}),Object(te.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(te.jsxs)($.a.Group,{controlId:"comment",children:[Object(te.jsx)($.a.Label,{children:"Avis"}),Object(te.jsx)($.a.Control,{as:"textarea",row:"5",value:x,onChange:function(e){return f(e.target.value)}})]}),Object(te.jsx)(ee.a,{disabled:N,type:"submit",variant:"primary",children:"Submit"})]}):Object(te.jsxs)(me,{variant:"primary",children:["Veillez ",Object(te.jsx)(le.Link,{to:"/login",children:"Vous connectez"})," pour r\xe9diger votre avis"]})]}),w.reviews.slice(0,A).map((function(e){return Object(te.jsxs)(Ee.a.Item,{children:[Object(te.jsx)("strong",{children:e.name}),Object(te.jsx)(oe,{value:e.rating,color:"#f8e825"}),Object(te.jsx)("p",{children:e.date_created.substring(0,10)}),Object(te.jsx)("p",{children:e.comment})]},e._id)}))]}),A<w.reviews.length?Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",onClick:function(e){E(A+1)},children:" Voir plus d'avis"}):""]})]})]})]})})),Te=a(28),Le=a(6);var Re=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.auth.error}}),{login:function(e,t){return function(){var a=Object(h.a)(p.a.mark((function a(r){var n,s,c;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,O.a.post("".concat("http://localhost:8000","/auth/jwt/create/"),s,n);case 5:c=a.sent,r({type:x,payload:c.data}),r(H()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),r({type:f,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()},delete_err:Z})((function(e){var t=e.login,a=e.isAuthenticated,n=e.error,s=e.delete_err,c=Object(r.useState)({email:"",password:""}),o=Object(i.a)(c,2),l=o[0],j=o[1],d=l.email,u=l.password,b=function(e){return j(Object(Le.a)(Object(Le.a)({},l),{},Object(Te.a)({},e.target.name,e.target.value)))};return a?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Se Connceter"}),Object(te.jsx)("div",{Style:"display: none;",children:n?setTimeout((function(){s()}),1e4):null}),n&&Object(te.jsx)(me,{variant:"danger",children:n}),Object(te.jsxs)($.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(d,u)}(e)},children:[Object(te.jsxs)($.a.Group,{controlId:"formBasicEmail",children:[Object(te.jsx)($.a.Label,{children:"Email "}),Object(te.jsx)($.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:d,onChange:function(e){return b(e)},required:!0}),Object(te.jsx)($.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(te.jsxs)($.a.Group,{controlId:"formBasicPassword",children:[Object(te.jsx)($.a.Label,{children:"Mot de passe"}),Object(te.jsx)($.a.Control,{type:"password",placeholder:"Password",name:"password",value:u,onChange:function(e){return b(e)},minLength:"6",required:!0})]}),Object(te.jsx)(ee.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(te.jsxs)("p",{className:"mt-3",children:["ouvrir un nouveau compte ? ",Object(te.jsx)(le.Link,{to:"/signup",children:"S'inscrire"})]}),Object(te.jsxs)("p",{className:"mt-3",children:["mot de passe oubli\xe9 ? ",Object(te.jsx)(le.Link,{to:"/reset-password",children:"R\xe9nitialiser le mot de passe"})]})]})}));var De=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.auth.error,message:e.auth.message}}),{signup:function(e,t,a,r){return function(){var n=Object(h.a)(p.a.mark((function n(s){var c,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},i=JSON.stringify({username:e,email:t,password:a,re_password:r}),n.prev=2,n.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/"),i,c);case 5:n.sent,s({type:L,payload:"votre compte a bien \xe9t\xe9 cr\xe9e v\xe9rifier votre adress mail pour l'activer!"}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),[],s({type:R,payload:n.t0.response&&n.t0.response.data?Object.values(n.t0.response.data).flat().join():n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},delete_err:Z,delete_msg:Q,create_msg:K,create_err:X})((function(e){var t=e.signup,a=e.isAuthenticated,n=e.error,s=e.message,c=e.delete_err,o=e.delete_msg,l=(e.create_msg,e.create_err),j=Object(r.useState)(!1),d=Object(i.a)(j,2),u=(d[0],d[1]),b=Object(r.useState)({username:"",email:"",password:"",re_password:""}),p=Object(i.a)(b,2),h=p[0],m=p[1],O=h.username,x=h.email,f=h.password,v=h.re_password,g=function(e){return m(Object(Le.a)(Object(Le.a)({},h),{},Object(Te.a)({},e.target.name,e.target.value)))};return a?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Cr\xe9ation d'un nouveau compte"}),Object(te.jsx)("div",{Style:"display: none;",children:n?setTimeout((function(){c()}),1e4):null}),Object(te.jsx)("div",{Style:"display: none;",children:s?setTimeout((function(){o()}),1e4):null}),n&&Object(te.jsx)(me,{variant:"danger",children:n}),s&&Object(te.jsx)(me,{variant:"success",children:s}),Object(te.jsxs)($.a,{onSubmit:function(e){return function(e){e.preventDefault(),f===v?(t(O,x,f,v),u(!0)):l("les deux mot de passe doivent etre egaux")}(e)},children:[Object(te.jsxs)($.a.Group,{controlId:"formBasicUserName",children:[Object(te.jsx)($.a.Label,{children:"Nom d'utilisateur "}),Object(te.jsx)($.a.Control,{type:"text",placeholder:"username*",name:"username",value:O,onChange:function(e){return g(e)},required:!0}),Object(te.jsx)($.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(te.jsxs)($.a.Group,{controlId:"formBasicEmail",children:[Object(te.jsx)($.a.Label,{children:"Email "}),Object(te.jsx)($.a.Control,{type:"email",placeholder:"Enter email*",name:"email",value:x,onChange:function(e){return g(e)},required:!0}),Object(te.jsx)($.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(te.jsxs)($.a.Group,{controlId:"formBasicPassword",children:[Object(te.jsx)($.a.Label,{children:"Mot de passe "}),Object(te.jsx)($.a.Control,{type:"password",placeholder:"Password*",name:"password",value:f,onChange:function(e){return g(e)},minLength:"6",required:!0})]}),Object(te.jsxs)($.a.Group,{controlId:"formBasicPassword",children:[Object(te.jsx)($.a.Label,{children:"Confirmation du nouveau mot de passe"}),Object(te.jsx)($.a.Control,{type:"password",placeholder:"Confirm Password*",name:"re_password",value:v,onChange:function(e){return g(e)},minLength:"6",required:!0})]}),Object(te.jsx)(ee.a,{variant:"primary",type:"submit",children:"Cr\xe9ez votre mot de passe"})]})]})})),Ge=a(80);a(128);var Me=Object(u.b)((function(e){return{error:e.auth.error,message:e.auth.message,isAuthenticated:e.auth.isAuthenticated}}),{reset_password:function(e){return function(){var t=Object(h.a)(p.a.mark((function t(a){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{"Content-Type":"application/json"}},n=JSON.stringify({email:e}),t.prev=2,t.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/reset_password/"),n,r);case 5:a({type:k,payload:"v\xe9rifier votre mail!"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),a({type:_,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},delete_err:Z,delete_msg:Q})((function(e){var t=e.reset_password,a=e.error,n=e.message,s=e.delete_err,c=e.delete_msg,o=e.isAuthenticated,l=Object(r.useState)(!1),j=Object(i.a)(l,2),d=(j[0],j[1]),u=Object(r.useState)({email:""}),b=Object(i.a)(u,2),p=b[0],h=b[1],m=p.email;return o?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"R\xe9netialiser le mot de passe"}),Object(te.jsx)("div",{Style:"display: none;",children:a?setTimeout((function(){s()}),1e4):null}),Object(te.jsx)("div",{Style:"display: none;",children:n?setTimeout((function(){c()}),1e4):null}),a&&Object(te.jsx)(me,{variant:"danger",children:a}),n&&Object(te.jsx)(me,{variant:"success",children:n}),Object(te.jsxs)($.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(m),d(!0)}(e)},children:[Object(te.jsxs)($.a.Group,{controlId:"formBasicEmail",children:[Object(te.jsx)($.a.Label,{children:"Email "}),Object(te.jsx)($.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:m,onChange:function(e){return function(e){return h(Object(Le.a)(Object(Le.a)({},p),{},Object(Te.a)({},e.target.name,e.target.value)))}(e)},required:!0}),Object(te.jsx)($.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(te.jsx)(ee.a,{variant:"primary",type:"submit",children:"R\xe9nitialiser le mot de passe"})]}),Object(te.jsx)(Ge.a,{})]})}));var Ue=Object(u.b)((function(e){return{error:e.auth.error,message:e.auth.message,isAuthenticated:e.auth.isAuthenticated}}),{reset_password_confirm:function(e,t,a,r){return function(){var n=Object(h.a)(p.a.mark((function n(s){var c,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={headers:{"Content-Type":"application/json"}},i=JSON.stringify({uid:e,token:t,new_password:a,re_new_password:r}),n.prev=2,n.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/reset_password_confirm/"),i,c);case 5:s({type:E,payload:"v\xe9rifier votre mail!"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),s({type:A,payload:n.t0.response&&n.t0.response.data.detail?n.t0.response.data.detail:n.t0.message});case 11:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}()},delete_err:Z,delete_msg:Q,create_msg:K,create_err:X})((function(e){var t=e.match,a=e.reset_password_confirm,n=e.error,s=e.message,c=e.delete_err,o=e.delete_msg,l=(e.create_msg,e.create_err),j=e.isAuthenticated,d=Object(r.useState)(!1),u=Object(i.a)(d,2),b=(u[0],u[1]),p=Object(r.useState)({new_password:"",re_new_password:""}),h=Object(i.a)(p,2),m=h[0],O=h[1],x=m.new_password,f=m.re_new_password,v=function(e){return O(Object(Le.a)(Object(Le.a)({},m),{},Object(Te.a)({},e.target.name,e.target.value)))};return j?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsxs)("div",{children:[Object(te.jsx)(ee.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Confirmation de R\xe9netialiser le mot de passe"}),Object(te.jsx)("div",{Style:"display: none;",children:n?setTimeout((function(){c()}),1e4):null}),Object(te.jsx)("div",{Style:"display: none;",children:s?setTimeout((function(){o()}),1e4):null}),n&&Object(te.jsx)(me,{variant:"danger",children:n}),s&&Object(te.jsx)(me,{variant:"success",children:s}),Object(te.jsxs)($.a,{onSubmit:function(e){return function(e){e.preventDefault();var r=t.params.uid,n=t.params.token;x===f?(a(r,n,x,f),b(!0)):l("les deux mot de passe doivent etre egaux")}(e)},children:[Object(te.jsxs)($.a.Group,{controlId:"formBasicPassword",children:[Object(te.jsx)($.a.Label,{children:"Nouveau mot de passe "}),Object(te.jsx)($.a.Control,{type:"password",placeholder:"New Password",name:"new_password",value:x,onChange:function(e){return v(e)},minLength:"6",required:!0})]}),Object(te.jsxs)($.a.Group,{controlId:"formBasicPassword",children:[Object(te.jsx)($.a.Label,{children:"Confirmation du nouveau mot de passe"}),Object(te.jsx)($.a.Control,{type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:f,onChange:function(e){return v(e)},minLength:"6",required:!0})]}),Object(te.jsx)(ee.a,{variant:"primary",type:"submit",children:"R\xe9nitialiser le mot de passe"})]})]})}));var Fe=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{verify:function(e,t){return function(){var a=Object(h.a)(p.a.mark((function a(r){var n,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n={headers:{"Content-Type":"application/json"}},s=JSON.stringify({uid:e,token:t}),a.prev=2,a.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/activation/"),s,n);case 5:r({type:"ACTIVATION_SUCCESS"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),r({type:"ACTIVATION_FAIL"});case 11:case"end":return a.stop()}}),a,null,[[2,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.verify,a=e.match,n=e.isAuthenticated,s=Object(r.useState)(!1),c=Object(i.a)(s,2),o=c[0],l=c[1];return o?Object(te.jsx)(Y.c,{to:"/login"}):n?Object(te.jsx)(Y.c,{to:"/"}):Object(te.jsx)("div",{children:Object(te.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(te.jsx)("h1",{children:"Verifiez votre compte:"}),Object(te.jsx)(ee.a,{variant:"primary",onClick:function(e){var r=a.params.uid,n=a.params.token;t(r,n),l(!0)},style:{marginTop:"50px"},type:"button",children:"V\xe9rifier"})]})})})),Pe=Object(u.b)(null,{checkAuthenticated:function(){return function(){var e=Object(h.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},r=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,O.a.post("".concat("http://localhost:8000","/auth/jwt/verify/"),r,a);case 6:"token_not_valid"!==e.sent.data.code?t({type:y}):t({type:S}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:S});case 13:e.next=16;break;case 15:t({type:S});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},load_user:H})((function(e){e.match;var t=e.checkAuthenticated,a=e.load_user,n=e.children,s=Object(Y.k)();return Object(r.useEffect)((function(){t(),a(),s.listen((function(e){t(),a()}))}),[]),Object(te.jsxs)("div",{children:[Object(te.jsx)(re,{}),Object(te.jsx)("main",{className:"py-3",children:Object(te.jsx)(j.a,{children:n})}),Object(te.jsx)(ce,{})]})})),ze=a(39),Be=a(77),We=a(78),qe={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null,error:null,message:null},Ve=Object(ze.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case x:return localStorage.setItem("access",r.access),localStorage.setItem("refresh",r.refresh),Object(Le.a)(Object(Le.a)({},e),{},{isAuthenticated:!0,access:r.access,refresh:r.refresh,error:null});case v:return Object(Le.a)(Object(Le.a)({},e),{},{user:r});case g:return Object(Le.a)(Object(Le.a)({},e),{},{user:null});case f:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Le.a)(Object(Le.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:t.payload});case y:return Object(Le.a)(Object(Le.a)({},e),{},{isAuthenticated:!0});case S:return Object(Le.a)(Object(Le.a)({},e),{},{isAuthenticated:!1});case w:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Le.a)(Object(Le.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:null});case k:case E:return Object(Le.a)(Object(Le.a)({},e),{},{message:t.payload});case _:case A:return Object(Le.a)(Object(Le.a)({},e),{},{error:t.payload});case C:return Object(Le.a)(Object(Le.a)({},e),{},{message:null});case N:return Object(Le.a)(Object(Le.a)({},e),{},{error:null});case I:return Object(Le.a)(Object(Le.a)({},e),{},{message:t.payload});case T:return Object(Le.a)(Object(Le.a)({},e),{},{error:t.payload});case L:return Object(Le.a)(Object(Le.a)({},e),{},{isAuthenticated:!1,message:t.payload});case R:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Le.a)(Object(Le.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:t.payload});default:return e}},magasinList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{magasins:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{loading:!0,magasins:[]};case G:return{loading:!1,magasins:t.payload.magasins,page:t.payload.page,pages:t.payload.pages};case M:return{loading:!1,error:t.payload};default:return e}},magasinDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{magasin:{reviews:[],produits:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(Le.a)({loading:!0},e);case F:return{loading:!1,magasin:t.payload};case P:return{loading:!1,error:t.payload};default:return e}},magasinReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return{loading:!0};case B:return{loading:!1,success:!0};case W:return{loading:!1,error:t.payload};case q:return{};case V:return Object(Le.a)(Object(Le.a)({},e),{},{success:!1});case J:return{error:null};default:return e}}}),Je=[We.a],He=Object(ze.createStore)(Ve,{},Object(Be.composeWithDevTools)(ze.applyMiddleware.apply(void 0,Je)));var Qe=function(){return Object(te.jsx)(u.a,{store:He,children:Object(te.jsx)(le.BrowserRouter,{children:Object(te.jsx)(Pe,{children:Object(te.jsxs)(Y.g,{children:[Object(te.jsx)(Y.d,{path:"/",component:ve,exact:!0}),Object(te.jsx)(Y.d,{path:"/magasin/:id",component:Ie}),Object(te.jsx)(Y.d,{path:"/login",component:Re}),Object(te.jsx)(Y.d,{path:"/activate/:uid/:token",component:Fe}),Object(te.jsx)(Y.d,{path:"/signup",component:De}),Object(te.jsx)(Y.d,{path:"/reset-password",component:Me}),Object(te.jsx)(Y.d,{path:"/password/reset/confirm/:uid/:token",component:Ue})]})})})})},Ze=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,150)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};a(129);c.a.render(Object(te.jsx)(n.a.StrictMode,{children:Object(te.jsx)(Qe,{})}),document.getElementById("root")),Ze()},86:function(e,t,a){},87:function(e,t,a){}},[[130,1,2]]]);
//# sourceMappingURL=main.45e855e9.chunk.js.map