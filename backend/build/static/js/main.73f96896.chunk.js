(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{131:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(23),s=a.n(c),i=(a(88),a(89),a(7)),o=a(144),l=a(143),u=a(134),d=a(33),j=a(9),p=a(8),b=a.n(p),h=a(14),m=a(13),O=a.n(m),x="LOGIN_SUCCESS",f="LOGIN_FAIL",g="USER_LOADED_SUCCESS",v="USER_LOADED_FAIL",y="AUTHENTICATED_SUCCESS",S="AUTHENTICATED_FAIL",k="LOGOUT",w="PASSWORD_RESET_FAIL",C="PASSWORD_RESET_SUCCESS",A="PASSWORD_RESET_CONFIRM_FAIL",E="PASSWORD_RESET_CONFIRM_SUCCESS",_="DELETE_MESSAGE",I="DELETE_ERROR",N="CREATE_MESSAGE",T="CREATE_ERROR",L="SIGNUP_SUCCESS",R="SIGNUP_FAIL",G="MAGASIN_LIST_REQUEST",z="MAGASIN_LIST_SUCCESS",D="MAGASIN_LIST_FAIL",M="MAGASIN_DETAILS_REQUEST",B="MAGASIN_DETAILS_SUCCESS",F="MAGASIN_DETAILS_FAIL",U="MAGASIN_CREATE_REVIEW_REQUEST",W="MAGASIN_CREATE_REVIEW_SUCCESS",P="MAGASIN_CREATE_REVIEW_FAIL",q="MAGASIN_CREATE_REVIEW_RESET",J="DELETE_MESSAGE_MAG",V="DELETE_ERROR_MAG",Q="MAGASIN_CREATE_VISITE_REQUEST",H="MAGASIN_CREATE_VISITE_SUCCESS",Z="MAGASIN_CREATE_VISITE_FAIL",$="MAGASIN_CREATE_VISITE_RESET",K="MAGASINMarchant_LIST_REQUEST",X="MAGASINMarchant_LIST_SUCCESS",Y="MAGASINMarchant_LIST_FAIL",ee="MAGASIN_CREATE_REQUETE_REQUEST",te="MAGASIN_CREATE_REQUETE_SUCCESS",ae="MAGASIN_CREATE_REQUETE_FAIL",ne="MAGASIN_CREATE_REQUETE_RESET",re=function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,O.a.get("".concat("http://localhost:8000","/auth/users/me/"),a);case 5:n=e.sent,t({type:g,payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:v});case 12:e.next=15;break;case 14:t({type:v});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},ce=function(){return function(e){e({type:_})}},se=function(){return function(e){e({type:I})}},ie=function(e){return function(t){t({type:N,payload:e})}},oe=function(e){return function(t){t({type:T,payload:e})}},le=a(16),ue=a(141),de=a(133),je=a(0);var pe=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(le.k)();return Object(je.jsxs)(ue.a,{onSubmit:function(e){e.preventDefault(),a?c.push("/?keyword=".concat(a,"&page=1")):c.push(c.push(c.location.pathname))},inline:!0,children:[Object(je.jsx)(ue.a.Control,{type:"text",name:"q",onChange:function(e){return r(e.target.value)},className:"mr-sm-2 ml-sm-5"}),Object(je.jsx)(de.a,{type:"submit",variant:"outline-success",className:"p-2",children:"Submit"})]})};var be=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{logout:function(){return function(e){e({type:k})}}})((function(e){var t=e.logout,a=e.isAuthenticated,r=e.user,c=Object(n.useState)(!1),s=Object(i.a)(c,2),j=s[0],p=s[1],b=function(){t(),p(!0)};return Object(je.jsxs)("header",{children:[Object(je.jsx)(l.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(je.jsxs)(u.a,{children:[Object(je.jsx)(d.LinkContainer,{to:"/",children:Object(je.jsx)(l.a.Brand,{children:"ShopsDz"})}),Object(je.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(je.jsxs)(l.a.Collapse,{className:"justify-content-start",children:[Object(je.jsx)(pe,{}),Object(je.jsx)(o.a,{className:"ml-auto",children:a?Object(je.jsxs)(n.Fragment,{className:"nav ml-auto",children:[Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsxs)("a",{className:"nav-link",href:"#!",children:[Object(je.jsx)("i",{class:"fas fa-user"}),r?r.username:""]})}),r&&r.is_merchant?Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(d.LinkContainer,{to:"/marchant/magasinslist",children:Object(je.jsxs)(o.a.Link,{children:[Object(je.jsx)("i",{class:"fas fa-store"}),"vos magasins"]})})}):Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(d.LinkContainer,{to:"/create-magasin",children:Object(je.jsxs)(o.a.Link,{children:[Object(je.jsx)("i",{class:"fas fa-plus-square"}),"cr\xe9e mgasin"]})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsxs)("a",{className:"nav-link",href:"/",onClick:b,children:[Object(je.jsx)("i",{class:"fas fa-sign-out-alt"}),"Logout"]})})]}):Object(je.jsxs)(n.Fragment,{className:"nav ml-auto",children:[Object(je.jsx)("li",{className:"nav-item ",children:Object(je.jsx)(d.LinkContainer,{to:"/login",children:Object(je.jsxs)(o.a.Link,{children:[Object(je.jsx)("i",{className:"fas fa-user"}),"Se connecter"]})})}),Object(je.jsx)("li",{className:"nav-item",children:Object(je.jsx)(d.LinkContainer,{to:"/signup",children:Object(je.jsxs)(o.a.Link,{children:[Object(je.jsx)("i",{class:"fas fa-user-plus"}),"S'inscrire"]})})})]})})]})]})}),j?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsx)(n.Fragment,{})]})})),he=a(135),me=a(74);var Oe=function(){return Object(je.jsx)("footer",{className:" my-0 bg-dark text-white",children:Object(je.jsx)(u.a,{bg:"dark",variant:"dark",expand:"lg",children:Object(je.jsx)(he.a,{bg:"dark",children:Object(je.jsx)(me.a,{className:"text-center py-3",bg:"dark",children:"Copyright \xa9 ShopsDZ"})})})})},xe=a(146);var fe=function(e){var t=e.value,a=e.text,n=e.color;return Object(je.jsxs)("div",{className:"rating",children:[Object(je.jsx)("span",{children:Object(je.jsx)("i",{style:{color:n},className:t>=1?"fas fa-star":t>=.5?"fas fa-star-half-alt":"far fa-star"})}),Object(je.jsx)("span",{children:Object(je.jsx)("i",{style:{color:n},className:t>=2?"fas fa-star":t>=1.5?"fas fa-star-half-alt":"far fa-star"})}),Object(je.jsx)("span",{children:Object(je.jsx)("i",{style:{color:n},className:t>=3?"fas fa-star":t>=2.5?"fas fa-star-half-alt":"far fa-star"})}),Object(je.jsx)("span",{children:Object(je.jsx)("i",{style:{color:n},className:t>=4?"fas fa-star":t>=3.5?"fas fa-star-half-alt":"far fa-star"})}),Object(je.jsx)("span",{children:Object(je.jsx)("i",{style:{color:n},className:t>=5?"fas fa-star":t>=4.5?"fas fa-star-half-alt":"far fa-star"})}),Object(je.jsx)("span",{children:a&&a})]})},ge=a(12);var ve=function(e){var t=e.magasin,a=e.keyword;return Object(je.jsxs)(xe.a,{className:"my-3    rounded    ",children:[Object(je.jsx)(ge.Link,{to:"/magasin/".concat(a,"/").concat(t._id),children:Object(je.jsx)(xe.a.Img,{style:{height:"13rem"},variant:"top",src:"http://localhost:8000/static"+t.image})}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsx)(ge.Link,{to:"/magasin/".concat(a,"/").concat(t._id),children:Object(je.jsxs)(xe.a.Title,{as:"div",children:[Object(je.jsx)("strong",{children:t.nom}),"  ",Object(je.jsxs)("p",{children:[" ",Object(je.jsxs)("strong",{children:[" ",t.categorie]})]})]})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsx)("div",{className:"my-3",children:Object(je.jsx)(fe,{value:t.rating,text:"".concat(t.numReviews," avis"),color:"#f8e825"})})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsxs)("strong",{children:[Object(je.jsx)("i",{class:"fas fa-map-marker-alt"})," ",Object(je.jsx)("p",{children:Object(je.jsxs)("strong",{children:[t.commune&&t.commune.wilaya," ",t.commune&&t.commune.nom," ",t.adresse]})})]})})]})]})},ye=a(142);var Se=function(){return Object(je.jsxs)(ye.a,{children:[Object(je.jsxs)(ye.a.Item,{interval:5e3,style:{height:"30vw"},children:[Object(je.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-1.jpg"),alt:"First slide",style:{height:"30vw"}}),Object(je.jsxs)(ye.a.Caption,{children:[Object(je.jsx)("h1",{style:{color:"silver"},children:" ShopsDZ"}),Object(je.jsx)("p",{children:"Bienvenue en Alg\xe9rie"})]})]}),Object(je.jsx)(ye.a.Item,{interval:5e3,style:{height:"30vw"},children:Object(je.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-2.jpg"),alt:"Second slide",style:{height:"30vw"}})}),Object(je.jsx)(ye.a.Item,{style:{height:"30vw"},interval:5e3,children:Object(je.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-3.jpg"),alt:"Third slide",style:{height:"30vw"}})}),Object(je.jsx)(ye.a.Item,{style:{height:"30vw"},interval:5e3,children:Object(je.jsx)("img",{className:"d-block w-100",src:"".concat("http://localhost:8000","/static/images/slide-4.jpg"),alt:"Third slide",style:{height:"30vw"}})})]})},ke=a(136);var we=function(){return Object(je.jsx)(ke.a,{animation:"border",role:"status",style:{height:"100px",width:"100px",margin:"auto",display:"block"},children:Object(je.jsx)("span",{className:"sr-only",children:"Loading..."})})},Ce=a(145);var Ae=function(e){var t=e.variant,a=e.children;return Object(je.jsx)(Ce.a,{variant:t,children:a})},Ee=a(80),_e=a(147);var Ie=function(e){var t=e.pages,a=e.page,r=e.keyword,c=void 0===r?"":r,s=e.screen;c&&(c=c.split("?keyword=")[1].split("&")[0]);var o=Object(n.useState)(t>10?a>10?a-10+1:1:a>t/2?a-t/2+1:1),l=Object(i.a)(o,2),u=l[0],j=l[1],p=Object(n.useState)(t>10?a>10?a:10:a>t/2?a:t/2),b=Object(i.a)(p,2),h=b[0],m=b[1];return t>1&&Object(je.jsxs)(_e.a,{className:"d-flex flex-row justify-content-center align-items-center",style:{marginTop:"20px"},children:[Object(je.jsx)(_e.a.First,{onClick:function(e){t>10?u>2&&h>10||h>10?(j(u-1),m(h-1)):j(1):u>2&&h>t/2||h>t/2?(j(u-1),m(h-1)):j(1)}}),Object(Ee.a)(Array(t).keys()).slice(u-1,h).map((function(e){return Object(je.jsx)(d.LinkContainer,{to:"home"==s?"/?keyword=".concat(c,"&page=").concat(e+1):"marchant"==s&&"/marchant/magasinslist/?page=".concat(e+1),children:Object(je.jsx)(_e.a.Item,{active:e+1===a,children:e+1})},e+1)})),Object(je.jsx)(_e.a.Last,{onClick:function(e){h<t&&(m(h+1),j(u+1))}})]})},Ne=function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:M}),t.next=4,O.a.get("".concat("http://localhost:8000","/api/magasins/").concat(e,"/"));case 4:n=t.sent,r=n.data,a({type:B,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:F,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Te=a(36),Le=a.n(Te),Re={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}};var Ge=function(e){var t=e.history,a=(e.match,Object(j.c)()),r=Object(j.d)((function(e){return e.magasinList})),c=r.error,s=r.loading,i=r.magasins,o=r.page,l=r.pages,u=r.rec1,d=r.rec2,p=t.location.search;return Object(n.useEffect)((function(){a(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(h.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:G}),t.next=4,O.a.get("".concat("http://localhost:8000","/api/magasins/").concat(e));case 4:n=t.sent,r=n.data,a({type:z,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:D,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(p))}),[a,p]),Object(je.jsxs)("div",{children:[!p&&Object(je.jsx)(Se,{}),Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Nos magasins"}),s?Object(je.jsx)(we,{}):c?Object(je.jsx)(Ae,{variant:"danger",children:c}):Object(je.jsxs)("div",{children:[Object(je.jsx)(he.a,{children:i.map((function(e){return Object(je.jsx)(me.a,{className:"col-lg-4 d-flex align-items-stretch",sm:12,md:6,lg:4,xl:3,children:Object(je.jsx)(ve,{magasin:e,keyword:p&&""!==p.split("keyword=").pop().split("&")[0]?p.split("keyword=").pop().split("&")[0]:void 0})},e._id)}))}),Object(je.jsx)(Ie,{page:o,pages:l,keyword:p,screen:"home"}),u&&u.length>0&&Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Recommandation par expansion"}),u&&u.length>0?Object(je.jsx)(Le.a,{responsive:Re,children:u.map((function(e){return Object(je.jsx)(me.a,{className:" d-flex align-self-stretch ",md:11,children:Object(je.jsx)(ve,{magasin:e,keyword:p&&""!==p.split("keyword=").pop().split("&")[0]?p.split("keyword=").pop().split("&")[0]:void 0})},e._id)}))}):null,d&&d.length>0&&Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Recommandation guid\xe9"}),d&&d.length>0?Object(je.jsx)(Le.a,{responsive:Re,children:d.map((function(e){return Object(je.jsx)(me.a,{className:" d-flex align-items-stretch my-3    h-200",md:11,children:Object(je.jsx)(ve,{magasin:e,keyword:p&&""!==p.split("keyword=").pop().split("&")[0]?p.split("keyword=").pop().split("&")[0]:void 0})},e._id)}))}):null]})]})},ze=a(138),De=a(149),Me=a(139),Be=a(140),Fe=(a(73),a(137)),Ue=a(148);var We=function(e){var t=e.produit;return Object(je.jsxs)(xe.a,{className:"my-3    rounded",children:[Object(je.jsx)(xe.a.Img,{variant:"top",src:"http://localhost:8000/static"+t.produit_nom.image,style:{height:"15vw"}}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsx)(xe.a.Title,{as:"div",children:Object(je.jsx)("strong",{children:t.produit_nom.nom})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsxs)("strong",{children:[Object(je.jsx)("i",{class:"fas fa-money-bill-wave"})," ",Object(je.jsxs)("strong",{children:[t.prix," DA "]})]})})]})]})},Pe={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}};var qe=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}),{delete_msgMag:function(){return function(e){e({type:J})}},delete_errMag:function(){return function(e){e({type:V})}}})((function(e){var t=e.match,a=e.history,r=e.user,c=e.delete_msgMag,s=e.delete_errMag,o=(e.isAuthenticated,Object(n.useState)(0)),l=Object(i.a)(o,2),u=l[0],d=l[1],p=Object(n.useState)(""),m=Object(i.a)(p,2),x=m[0],f=m[1],g=Object(j.c)(),v=Object(j.d)((function(e){return e.magasinDetails})),y=v.loading,S=v.error,k=v.magasin,w=Object(n.useState)(2),C=Object(i.a)(w,2),A=C[0],E=C[1],_=Object(j.d)((function(e){return e.magasinReviewCreate})),I=_.loading,N=_.error,T=_.success;return Object(n.useEffect)((function(){a.listen((function(e){c(),s()})),g(Ne(t.params.id))}),[g,t,k]),Object(n.useEffect)((function(){if(void 0!==t.params.keyword&&"undefined"!==t.params.keyword){var e={keyword:t.params.keyword};g(function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(n,r){var c,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:ee}),a.next=4,O.a.post("".concat("http://localhost:8000","/api/magasins/").concat(e,"/requetes/"),t);case 4:c=a.sent,s=c.data,n({type:te,payload:s}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),n({type:ae,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}()}(t.params.id,e))}}),[]),Object(je.jsxs)("div",{children:[Object(je.jsxs)(ge.Link,{to:"/",children:["  ",Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Retour a la page principale"})]}),y?Object(je.jsx)(we,{}):S?Object(je.jsx)(Ae,{variant:"danger",children:S}):Object(je.jsxs)("div",{children:[Object(je.jsxs)(he.a,{children:[Object(je.jsx)(me.a,{md:7,children:Object(je.jsx)(Fe.a,{src:"http://localhost:8000/static"+k.image,alt:k.nom,fluid:!0})}),Object(je.jsx)(me.a,{md:5,children:Object(je.jsxs)(xe.a,{border:"light",style:{width:"100%"},children:[Object(je.jsx)(xe.a.Header,{children:Object(je.jsx)("h3",{children:k.nom})}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsxs)(xe.a.Title,{children:[Object(je.jsx)("strong",{children:"Cat\xe9gorie : "}),k.categorie&&k.categorie.nom]}),Object(je.jsxs)(Ue.a,{variant:"flush",children:[Object(je.jsx)(Ue.a.Item,{className:"pl-0",children:Object(je.jsx)(fe,{value:k.rating,text:"".concat(k.numReviews," avis"),color:"#f8e825"})}),Object(je.jsxs)(Ue.a.Item,{className:"pl-0",children:[Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("strong",{children:"Wilaya:"}),k.commune&&k.commune.wilaya]}),Object(je.jsx)("br",{}),Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("strong",{children:"Comune:"})," ",k.commune&&k.commune.nom]}),Object(je.jsx)("br",{}),Object(je.jsx)("i",{class:"fas fa-map-marker-alt",children:" "})," ",Object(je.jsx)("span",{style:{color:"black"},children:Object(je.jsx)("strong",{children:k.adresse})})]}),Object(je.jsx)(Ue.a.Item,{className:"pl-0",children:Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-phone-alt"}),k.telephone]})}),Object(je.jsxs)(Ue.a.Item,{className:"pl-0",children:[Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-door-open"}),k.overture]}),Object(je.jsx)("br",{}),Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-door-closed"}),k.fermeture]})]})]})]})]})})]}),k.produits?Object(je.jsx)(Le.a,{responsive:Pe,children:k.produits.map((function(e){return Object(je.jsx)(me.a,{md:11,children:Object(je.jsx)(We,{produit:e})},e._id)}))}):null,Object(je.jsxs)(ze.a,{className:"my-3",center:[k.latitude?k.latitude:0,k.longitude?k.longitude:0],zoom:10,scrollWheelZoom:!1,children:[Object(je.jsx)(De.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(je.jsx)(Me.a,{position:[k.latitude?k.latitude:0,k.longitude?k.longitude:0],children:Object(je.jsx)(Be.a,{children:k.nom})})]}),Object(je.jsxs)(he.a,{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Avis"}),Object(je.jsx)(me.a,{md:12,children:0===k.reviews.length&&Object(je.jsx)(Ae,{variant:"info",children:"Pas d'avis!"})}),Object(je.jsxs)(me.a,{md:6,children:[Object(je.jsxs)(Ue.a,{variant:"flush",children:[Object(je.jsxs)(Ue.a.Item,{children:[Object(je.jsx)("h4",{children:"R\xe9idiger ou modifier votre avis"}),I&&Object(je.jsx)(we,{}),T&&Object(je.jsx)(Ae,{variant:"success",children:"Avis r\xe9dig\xe9"}),N&&Object(je.jsx)(Ae,{variant:"danger",children:N}),null!=r?Object(je.jsxs)(ue.a,{onSubmit:function(e){var a,n;e.preventDefault(),g((a=t.params.id,n={rating:u,comment:x},function(){var e=Object(h.a)(b.a.mark((function e(t,r){var c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:U}),c={headers:{"Content-type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=5,O.a.post("".concat("http://localhost:8000","/api/magasins/").concat(a,"/reviews/"),n,c);case 5:s=e.sent,i=s.data,t({type:W,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:P,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()))},children:[Object(je.jsxs)(ue.a.Group,{controlId:"rating",children:[Object(je.jsx)(ue.a.Label,{children:"Note"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:u,onChange:function(e){return d(e.target.value)},required:!0,children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),Object(je.jsx)("option",{value:"1",children:"1 - Pauvre"}),Object(je.jsx)("option",{value:"2",children:"2 - Assez bien"}),Object(je.jsx)("option",{value:"3",children:"3 - Bien"}),Object(je.jsx)("option",{value:"4",children:"4 - Tr\xe8s Bien"}),Object(je.jsx)("option",{value:"5",children:"5 - Excellent"})]})]}),Object(je.jsxs)(ue.a.Group,{controlId:"comment",children:[Object(je.jsx)(ue.a.Label,{children:"Avis"}),Object(je.jsx)(ue.a.Control,{as:"textarea",row:"5",value:x,onChange:function(e){return f(e.target.value)}})]}),Object(je.jsx)(de.a,{disabled:I,type:"submit",variant:"primary",children:"Submit"})]}):Object(je.jsxs)(Ae,{variant:"primary",children:["Veillez ",Object(je.jsx)(ge.Link,{to:"/login",children:"Vous connectez"})," pour r\xe9diger votre avis"]})]}),k.reviews.slice(0,A).map((function(e){return Object(je.jsxs)(Ue.a.Item,{children:[Object(je.jsx)("strong",{children:e.name}),Object(je.jsx)(fe,{value:e.rating,color:"#f8e825"}),Object(je.jsx)("p",{children:e.date_created.substring(0,10)}),Object(je.jsx)("p",{children:e.comment})]},e._id)}))]}),A<k.reviews.length?Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",onClick:function(e){E(A+1)},children:" Voir plus d'avis"}):""]})]})]})]})})),Je=a(19),Ve=a(5);var Qe=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.auth.error}}),{login:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(n){var r,c,s;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,O.a.post("".concat("http://localhost:8000","/auth/jwt/create/"),c,r);case 5:s=a.sent,n({type:x,payload:s.data}),n(re()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),n({type:f,payload:a.t0.response&&a.t0.response.data.detail?a.t0.response.data.detail:a.t0.message});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()},delete_err:se})((function(e){var t=e.login,a=e.isAuthenticated,r=e.error,c=e.delete_err,s=Object(n.useState)({email:"",password:""}),o=Object(i.a)(s,2),l=o[0],u=o[1],d=l.email,j=l.password,p=function(e){return u(Object(Ve.a)(Object(Ve.a)({},l),{},Object(Je.a)({},e.target.name,e.target.value)))};return a?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Se Connceter"}),Object(je.jsx)("div",{Style:"display: none;",children:r?setTimeout((function(){c()}),1e4):null}),r&&Object(je.jsx)(Ae,{variant:"danger",children:r}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(d,j)}(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicEmail",children:[Object(je.jsx)(ue.a.Label,{children:"Email "}),Object(je.jsx)(ue.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:d,onChange:function(e){return p(e)},required:!0}),Object(je.jsx)(ue.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPassword",children:[Object(je.jsx)(ue.a.Label,{children:"Mot de passe"}),Object(je.jsx)(ue.a.Control,{type:"password",placeholder:"Password",name:"password",value:j,onChange:function(e){return p(e)},minLength:"6",required:!0})]}),Object(je.jsx)(de.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(je.jsxs)("p",{className:"mt-3",children:["ouvrir un nouveau compte ? ",Object(je.jsx)(ge.Link,{to:"/signup",children:"S'inscrire"})]}),Object(je.jsxs)("p",{className:"mt-3",children:["mot de passe oubli\xe9 ? ",Object(je.jsx)(ge.Link,{to:"/reset-password",children:"R\xe9nitialiser le mot de passe"})]})]})}));var He=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.auth.error,message:e.auth.message}}),{signup:function(e,t,a,n){return function(){var r=Object(h.a)(b.a.mark((function r(c){var s,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={headers:{"Content-Type":"application/json"}},i=JSON.stringify({username:e,email:t,password:a,re_password:n}),r.prev=2,r.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/"),i,s);case 5:r.sent,c({type:L,payload:"votre compte a bien \xe9t\xe9 cr\xe9e v\xe9rifier votre adress mail pour l'activer!"}),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(2),[],c({type:R,payload:r.t0.response&&r.t0.response.data?Object.values(r.t0.response.data).flat().join():r.t0.message});case 13:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()},delete_err:se,delete_msg:ce,create_msg:ie,create_err:oe})((function(e){var t=e.signup,a=e.isAuthenticated,r=e.error,c=e.message,s=e.delete_err,o=e.delete_msg,l=(e.create_msg,e.create_err),u=Object(n.useState)(!1),d=Object(i.a)(u,2),j=(d[0],d[1]),p=Object(n.useState)({username:"",email:"",password:"",re_password:""}),b=Object(i.a)(p,2),h=b[0],m=b[1],O=h.username,x=h.email,f=h.password,g=h.re_password,v=function(e){return m(Object(Ve.a)(Object(Ve.a)({},h),{},Object(Je.a)({},e.target.name,e.target.value)))};return a?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Cr\xe9ation d'un nouveau compte"}),Object(je.jsx)("div",{Style:"display: none;",children:r?setTimeout((function(){s()}),1e4):null}),Object(je.jsx)("div",{Style:"display: none;",children:c?setTimeout((function(){o()}),1e4):null}),r&&Object(je.jsx)(Ae,{variant:"danger",children:r}),c&&Object(je.jsx)(Ae,{variant:"success",children:c}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return function(e){e.preventDefault(),f===g?(t(O,x,f,g),j(!0)):l("les deux mot de passe doivent etre egaux")}(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicUserName",children:[Object(je.jsx)(ue.a.Label,{children:"Nom d'utilisateur "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"username*",name:"username",value:O,onChange:function(e){return v(e)},required:!0}),Object(je.jsx)(ue.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicEmail",children:[Object(je.jsx)(ue.a.Label,{children:"Email "}),Object(je.jsx)(ue.a.Control,{type:"email",placeholder:"Enter email*",name:"email",value:x,onChange:function(e){return v(e)},required:!0}),Object(je.jsx)(ue.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPassword",children:[Object(je.jsx)(ue.a.Label,{children:"Mot de passe "}),Object(je.jsx)(ue.a.Control,{type:"password",placeholder:"Password*",name:"password",value:f,onChange:function(e){return v(e)},minLength:"6",required:!0})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPassword",children:[Object(je.jsx)(ue.a.Label,{children:"Confirmation du nouveau mot de passe"}),Object(je.jsx)(ue.a.Control,{type:"password",placeholder:"Confirm Password*",name:"re_password",value:g,onChange:function(e){return v(e)},minLength:"6",required:!0})]}),Object(je.jsx)(de.a,{variant:"primary",type:"submit",children:"Cr\xe9ez votre mot de passe"})]})]})})),Ze=a(81);a(129);var $e=Object(j.b)((function(e){return{error:e.auth.error,message:e.auth.message,isAuthenticated:e.auth.isAuthenticated}}),{reset_password:function(e){return function(){var t=Object(h.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=2,t.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/reset_password/"),r,n);case 5:a({type:C,payload:"v\xe9rifier votre mail!"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),a({type:w,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()},delete_err:se,delete_msg:ce})((function(e){var t=e.reset_password,a=e.error,r=e.message,c=e.delete_err,s=e.delete_msg,o=e.isAuthenticated,l=Object(n.useState)(!1),u=Object(i.a)(l,2),d=(u[0],u[1]),j=Object(n.useState)({email:""}),p=Object(i.a)(j,2),b=p[0],h=p[1],m=b.email;return o?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"R\xe9netialiser le mot de passe"}),Object(je.jsx)("div",{Style:"display: none;",children:a?setTimeout((function(){c()}),1e4):null}),Object(je.jsx)("div",{Style:"display: none;",children:r?setTimeout((function(){s()}),1e4):null}),a&&Object(je.jsx)(Ae,{variant:"danger",children:a}),r&&Object(je.jsx)(Ae,{variant:"success",children:r}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return function(e){e.preventDefault(),t(m),d(!0)}(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicEmail",children:[Object(je.jsx)(ue.a.Label,{children:"Email "}),Object(je.jsx)(ue.a.Control,{type:"email",placeholder:"Enter email",name:"email",value:m,onChange:function(e){return function(e){return h(Object(Ve.a)(Object(Ve.a)({},b),{},Object(Je.a)({},e.target.name,e.target.value)))}(e)},required:!0}),Object(je.jsx)(ue.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(je.jsx)(de.a,{variant:"primary",type:"submit",children:"R\xe9nitialiser le mot de passe"})]}),Object(je.jsx)(Ze.a,{})]})}));var Ke=Object(j.b)((function(e){return{error:e.auth.error,message:e.auth.message,isAuthenticated:e.auth.isAuthenticated}}),{reset_password_confirm:function(e,t,a,n){return function(){var r=Object(h.a)(b.a.mark((function r(c){var s,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s={headers:{"Content-Type":"application/json"}},i=JSON.stringify({uid:e,token:t,new_password:a,re_new_password:n}),r.prev=2,r.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/reset_password_confirm/"),i,s);case 5:c({type:E,payload:"v\xe9rifier votre mail!"}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),c({type:A,payload:r.t0.response&&r.t0.response.data.detail?r.t0.response.data.detail:r.t0.message});case 11:case"end":return r.stop()}}),r,null,[[2,8]])})));return function(e){return r.apply(this,arguments)}}()},delete_err:se,delete_msg:ce,create_msg:ie,create_err:oe})((function(e){var t=e.match,a=e.reset_password_confirm,r=e.error,c=e.message,s=e.delete_err,o=e.delete_msg,l=(e.create_msg,e.create_err),u=e.isAuthenticated,d=Object(n.useState)(!1),j=Object(i.a)(d,2),p=(j[0],j[1]),b=Object(n.useState)({new_password:"",re_new_password:""}),h=Object(i.a)(b,2),m=h[0],O=h[1],x=m.new_password,f=m.re_new_password,g=function(e){return O(Object(Ve.a)(Object(Ve.a)({},m),{},Object(Je.a)({},e.target.name,e.target.value)))};return u?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Confirmation de R\xe9netialiser le mot de passe"}),Object(je.jsx)("div",{Style:"display: none;",children:r?setTimeout((function(){s()}),1e4):null}),Object(je.jsx)("div",{Style:"display: none;",children:c?setTimeout((function(){o()}),1e4):null}),r&&Object(je.jsx)(Ae,{variant:"danger",children:r}),c&&Object(je.jsx)(Ae,{variant:"success",children:c}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return function(e){e.preventDefault();var n=t.params.uid,r=t.params.token;x===f?(a(n,r,x,f),p(!0)):l("les deux mot de passe doivent etre egaux")}(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPassword",children:[Object(je.jsx)(ue.a.Label,{children:"Nouveau mot de passe "}),Object(je.jsx)(ue.a.Control,{type:"password",placeholder:"New Password",name:"new_password",value:x,onChange:function(e){return g(e)},minLength:"6",required:!0})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPassword",children:[Object(je.jsx)(ue.a.Label,{children:"Confirmation du nouveau mot de passe"}),Object(je.jsx)(ue.a.Control,{type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:f,onChange:function(e){return g(e)},minLength:"6",required:!0})]}),Object(je.jsx)(de.a,{variant:"primary",type:"submit",children:"R\xe9nitialiser le mot de passe"})]})]})}));var Xe=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{verify:function(e,t){return function(){var a=Object(h.a)(b.a.mark((function a(n){var r,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),a.prev=2,a.next=5,O.a.post("".concat("http://localhost:8000","/auth/users/activation/"),c,r);case 5:n({type:"ACTIVATION_SUCCESS"}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),n({type:"ACTIVATION_FAIL"});case 11:case"end":return a.stop()}}),a,null,[[2,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.verify,a=e.match,r=e.isAuthenticated,c=Object(n.useState)(!1),s=Object(i.a)(c,2),o=s[0],l=s[1];return o?Object(je.jsx)(le.c,{to:"/login"}):r?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsx)("div",{children:Object(je.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(je.jsx)("h1",{children:"Verifiez votre compte:"}),Object(je.jsx)(de.a,{variant:"primary",onClick:function(e){var n=a.params.uid,r=a.params.token;t(n,r),l(!0)},style:{marginTop:"50px"},type:"button",children:"V\xe9rifier"})]})})}));var Ye=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){e.user;var t=e.isAuthenticated,a=e.history,r=Object(n.useState)([]),c=Object(i.a)(r,2),s=c[0],o=c[1],l=Object(n.useState)([]),u=Object(i.a)(l,2),d=u[0],j=u[1],p=Object(n.useState)([]),m=Object(i.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)("None"),v=Object(i.a)(g,2),y=v[0],S=v[1],k=Object(n.useState)(null),w=Object(i.a)(k,2),C=w[0],A=w[1],E=Object(n.useState)({nom:"",categorie:""}),_=Object(i.a)(E,2),I=_[0],N=_[1],T=I.nom,L=I.overture,R=I.fermeture,G=I.telephone,z=I.adresse,D=I.latitude,M=I.longitude,B=I.commune,F=I.categorie,U=I.image;function W(e){var t=new FormData,a=function(a){if(Array.isArray(e[a]))e[a].forEach((function(e,n){Object.keys(e).forEach((function(r){var c=[a,"[",n,"]",".",r].join("");t.append(c,e[r])}))}));else if("object"===typeof e[a])for(var n in e[a])t.append("".concat(a,".").concat(n),e[a][n]);else t.append(a,e[a])};for(var n in e)a(n);return t}var P=function(e){return N(Object(Ve.a)(Object(Ve.a)({},I),{},Object(Je.a)({},e.target.name,e.target.value)))},q=Object(n.useState)(!1),J=Object(i.a)(q,2),V=J[0],Q=J[1],H=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Q(!0),n=W(I),U&&n.append("image",U),e.prev=4,r={headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=8,O.a.post("".concat("http://localhost:8000","/api/magasins/create"),n,r);case 8:c=e.sent,c.data,Q(!1),a.push("/marchant/magasinslist"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),Q(!1),e.t0.response&&e.t0.response.data.detail?A(e.t0.response.data.detail):A(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],N(Object(Ve.a)(Object(Ve.a)({},I),{},{image:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){O.a.get("".concat("http://localhost:8000","/api/wilayas/")).then((function(e){return o(e.data),O.a.get("".concat("http://localhost:8000","/api/categories/"))})).then((function(e){j(e.data)})).catch((function(e){return console.log(e.response)}))}),[]),0==t?Object(je.jsx)(le.c,{to:"/"}):Object(je.jsx)("div",{children:V?Object(je.jsx)(we,{}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Cr\xe9e magasin"}),C&&Object(je.jsx)(Ae,{variant:"danger",children:C}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return H(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicNom",children:[Object(je.jsx)(ue.a.Label,{children:"Nom du magasin: "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer le nom du magasin",name:"nom",value:T,onChange:function(e){return P(e)},required:!0})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicOuverture",children:[Object(je.jsx)(ue.a.Label,{children:"Ouverture "}),Object(je.jsx)(ue.a.Control,{type:"time",placeholder:"Entrer le temps d'ouverture ",name:"overture",value:L,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicFermeture",children:[Object(je.jsx)(ue.a.Label,{children:"Fermeture "}),Object(je.jsx)(ue.a.Control,{type:"time",placeholder:"Entrer le temps de fermeture",name:"fermeture",value:R,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicT\xe9l\xe9phone",children:[Object(je.jsx)(ue.a.Label,{children:"T\xe9l\xe9phpne "}),Object(je.jsx)(ue.a.Control,{type:"tel",placeholder:"Entrer le numero de telephone",name:"telephone",value:G,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"categorie",children:[Object(je.jsx)(ue.a.Label,{children:"Cat\xe9gorie"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:F,name:"categorie",onChange:function(e){return P(e)},required:!0,children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),d.map((function(e){return Object(je.jsx)("option",{value:e._id,children:e.nom},e._id)}))]})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicAdresse",children:[Object(je.jsx)(ue.a.Label,{children:"Adresse "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer votre adresse",name:"adresse",value:z,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"wilaya",children:[Object(je.jsx)(ue.a.Label,{children:"Wilaya"}),Object(je.jsxs)(ue.a.Control,{as:"select",onChange:function(e){""!=e.target.value?(O.a.get("".concat("http://localhost:8000","/api/wilayas/").concat(e.target.value,"/communes/")).then((function(e){f(e.data)})).catch((function(e){return console.log(e.response)})),S("block")):S("none")},children:[Object(je.jsx)("option",{value:"",children:" Selectionez..."}),s.map((function(e){return Object(je.jsx)("option",{value:e.id,children:e.nom},e.id)}))]})]}),x&&Object(je.jsxs)(ue.a.Group,{controlId:"commune",style:{display:y},children:[Object(je.jsx)(ue.a.Label,{children:"commune"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:B,name:"commune",onChange:function(e){return P(e)},children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),x.map((function(e){return Object(je.jsx)("option",{value:e.id,children:e.nom},e.id)}))]})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicLatittude",children:[Object(je.jsx)(ue.a.Label,{children:"Latittude "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer la latitude ",name:"latitude",value:D,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicLongitude",children:[Object(je.jsx)(ue.a.Label,{children:"Longitude "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer la longitude",name:"longitude",value:M,onChange:function(e){return P(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"image",children:[Object(je.jsx)(ue.a.Label,{children:"Image"}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Enter image",value:U&&U.name,readonly:"readonly"}),Object(je.jsx)(ue.a.File,{id:"image-file",label:"Choose File",custom:!0,onChange:Z})]}),Object(je.jsx)(de.a,{type:"submit",variant:"primary",children:"Cr\xe9e"})]})]})})}));var et=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.user,a=e.isAuthenticated,r=e.history,c=e.match,s=Object(j.c)(),o=Object(j.d)((function(e){return e.magasinDetails})),l=o.loading,u=o.error,d=o.magasin,p=Object(n.useState)([]),m=Object(i.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)([]),v=Object(i.a)(g,2),y=v[0],S=v[1],k=Object(n.useState)([]),w=Object(i.a)(k,2),C=w[0],A=w[1],E=Object(n.useState)("None"),_=Object(i.a)(E,2),I=_[0],N=_[1],T=Object(n.useState)(null),L=Object(i.a)(T,2),R=L[0],G=L[1],z=Object(n.useState)({}),D=Object(i.a)(z,2),M=D[0],B=D[1],F=M.nom,U=M.overture,W=M.fermeture,P=M.telephone,q=M.adresse,J=M.latitude,V=M.longitude,Q=M.commune,H=M.categorie,Z=M.image;function $(e){var t=new FormData,a=function(a){if(Array.isArray(e[a]))e[a].forEach((function(e,n){Object.keys(e).forEach((function(r){var c=[a,"[",n,"]",".",r].join("");t.append(c,e[r])}))}));else if("object"===typeof e[a])for(var n in e[a])t.append("".concat(a,".").concat(n),e[a][n]);else t.append(a,e[a])};for(var n in e)a(n);return t}var K=function(e){return B(Object(Ve.a)(Object(Ve.a)({},M),{},Object(Je.a)({},e.target.name,e.target.value)))},X=Object(n.useState)(!1),Y=Object(i.a)(X,2),ee=Y[0],te=Y[1],ae=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),te(!0),a=$(M),Z&&a.append("image",Z),e.prev=4,n={headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=8,O.a.put("".concat("http://localhost:8000","/api/magasins/").concat(c.params.id,"/update"),a,n);case 8:s=e.sent,s.data,te(!1),r.push("/marchant/magasin/".concat(c.params.id)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),te(!1),e.t0.response&&e.t0.response.data.detail?G(e.t0.response.data.detail):G(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],B(Object(Ve.a)(Object(Ve.a)({},M),{},{image:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s(Ne(c.params.id)),B({nom:d.nom,overture:d.overture,fermeture:d.fermeture,categorie:d.categorie&&d.categorie._id,adresse:d.adresse,telephone:d.telephone,latitude:d.latitude,longitude:d.longitude,commune:d.commune&&d.commune.id}),O.a.get("".concat("http://localhost:8000","/api/wilayas/")).then((function(e){return f(e.data),O.a.get("".concat("http://localhost:8000","/api/categories/"))})).then((function(e){S(e.data)})).catch((function(e){return console.log(e.response)}))}),[s,c.params.id]),Object(n.useEffect)((function(){B({nom:d.nom,overture:d.overture,fermeture:d.fermeture,categorie:d.categorie&&d.categorie._id,adresse:d.adresse,telephone:d.telephone,latitude:d.latitude,longitude:d.longitude})}),[d]),(0==a||t&&d.user&&t&&d.user!==t.id)&&r.replace("/"),Object(je.jsx)("div",{children:ee||l?Object(je.jsx)(we,{}):u?Object(je.jsx)(Ae,{variant:"danger",children:u}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Modifier magasin"}),R&&Object(je.jsx)(Ae,{variant:"danger",children:R}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return ae(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"formBasicNom",children:[Object(je.jsx)(ue.a.Label,{children:"Nom du magasin: "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer le nom du magasin",name:"nom",value:F,onChange:function(e){return K(e)},required:!0})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicOuverture",children:[Object(je.jsx)(ue.a.Label,{children:"Ouverture "}),Object(je.jsx)(ue.a.Control,{type:"time",placeholder:"Entrer le temps d'ouverture ",name:"overture",value:U,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicFermeture",children:[Object(je.jsx)(ue.a.Label,{children:"Fermeture "}),Object(je.jsx)(ue.a.Control,{type:"time",placeholder:"Entrer le temps de fermeture",name:"fermeture",value:W,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicT\xe9l\xe9phone",children:[Object(je.jsx)(ue.a.Label,{children:"T\xe9l\xe9phpne "}),Object(je.jsx)(ue.a.Control,{type:"tel",placeholder:"Entrer le numero de telephone",name:"telephone",value:P,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"categorie",children:[Object(je.jsx)(ue.a.Label,{children:"Cat\xe9gorie"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:H,name:"categorie",onChange:function(e){return K(e)},required:!0,children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),y.map((function(e){return Object(je.jsx)("option",{value:e._id,children:e.nom},e._id)}))]})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicAdresse",children:[Object(je.jsx)(ue.a.Label,{children:"Adresse "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer votre adresse",name:"adresse",value:q,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"wilaya",children:[Object(je.jsx)(ue.a.Label,{children:"Wilaya"}),Object(je.jsxs)(ue.a.Control,{as:"select",onChange:function(e){""!=e.target.value?(O.a.get("".concat("http://localhost:8000","/api/wilayas/").concat(e.target.value,"/communes/")).then((function(e){A(e.data)})).catch((function(e){return console.log(e.response)})),N("block")):N("none")},children:[Object(je.jsx)("option",{value:"",children:" Selectionez..."}),x.map((function(e){return Object(je.jsx)("option",{value:e.id,children:e.nom},e.id)}))]})]}),C&&Object(je.jsxs)(ue.a.Group,{controlId:"commune",style:{display:I},children:[Object(je.jsx)(ue.a.Label,{children:"commune"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:Q,name:"commune",onChange:function(e){return K(e)},children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),C.map((function(e){return Object(je.jsx)("option",{value:e.id,children:e.nom},e.id)}))]})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicLatittude",children:[Object(je.jsx)(ue.a.Label,{children:"Latittude "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer la latitude ",name:"latitude",value:J,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicLongitude",children:[Object(je.jsx)(ue.a.Label,{children:"Longitude "}),Object(je.jsx)(ue.a.Control,{type:"text",inputmode:"numeric",placeholder:"Entrer la longitude",name:"longitude",value:V,onChange:function(e){return K(e)}})]}),Object(je.jsxs)(ue.a.Group,{controlId:"image",children:[Object(je.jsx)(ue.a.Label,{children:"Image"}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Enter image",value:Z&&Z.name,readonly:"readonly"}),Object(je.jsx)(ue.a.File,{id:"image-file",label:"Choose File",custom:!0,onChange:ne})]}),Object(je.jsx)(de.a,{type:"submit",variant:"primary",children:"Modifier"})]})]})})}));var tt=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.user,a=e.isAuthenticated,r=e.history,c=e.match,s=Object(j.c)(),o=Object(j.d)((function(e){return e.magasinDetails})),l=o.loading,u=o.error,d=o.magasin,p=Object(n.useState)([]),m=Object(i.a)(p,2),x=m[0],f=m[1],g=Object(n.useState)([]),v=Object(i.a)(g,2),y=v[0],S=v[1],k=Object(n.useState)("None"),w=Object(i.a)(k,2),C=w[0],A=w[1],E=Object(n.useState)(null),_=Object(i.a)(E,2),I=_[0],N=_[1],T=Object(n.useState)({}),L=Object(i.a)(T,2),R=L[0],G=L[1],z=R.categorie,D=R.produit,M=R.prix,B=R.nouveauproduit,F=R.image;function U(e){var t=new FormData,a=function(a){if(Array.isArray(e[a]))e[a].forEach((function(e,n){Object.keys(e).forEach((function(r){var c=[a,"[",n,"]",".",r].join("");t.append(c,e[r])}))}));else if("object"===typeof e[a])for(var n in e[a])t.append("".concat(a,".").concat(n),e[a][n]);else t.append(a,e[a])};for(var n in e)a(n);return t}var W=function(e){return G(Object(Ve.a)(Object(Ve.a)({},R),{},Object(Je.a)({},e.target.name,e.target.value)))},P=Object(n.useState)(!1),q=Object(i.a)(P,2),J=q[0],V=q[1],Q=function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),V(!0),a=U(R),F&&a.append("image",F),e.prev=4,n={headers:{"Content-Type":"multipart/form-data",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=8,O.a.post("".concat("http://localhost:8000","/api/produits/create/").concat(c.params.id),a,n);case 8:s=e.sent,s.data,V(!1),r.push("/marchant/magasin/".concat(c.params.id)),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),V(!1),e.t0.response&&e.t0.response.data.detail?N(e.t0.response.data.detail):N(e.t0.message),console.log(R);case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.files[0],G(Object(Ve.a)(Object(Ve.a)({},R),{},{image:a}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s(Ne(c.params.id)),O.a.get("".concat("http://localhost:8000","/api/categories/")).then((function(e){f(e.data)})).catch((function(e){return console.log(e.response)}))}),[s,c.params.id]),(0==a||t&&d.user&&t&&d.user!==t.id)&&r.replace("/"),Object(je.jsx)("div",{children:J||l?Object(je.jsx)(we,{}):u?Object(je.jsx)(Ae,{variant:"danger",children:u}):Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Ajouter un produit"}),I&&Object(je.jsx)(Ae,{variant:"danger",children:I}),Object(je.jsxs)(ue.a,{onSubmit:function(e){return Q(e)},children:[Object(je.jsxs)(ue.a.Group,{controlId:"categorie",children:[Object(je.jsx)(ue.a.Label,{children:"Cat\xe9gorie"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:z,name:"categorie",onChange:function(e){G(Object(Ve.a)(Object(Ve.a)({},R),{},Object(Je.a)({},e.target.name,e.target.value))),""!=e.target.value?(O.a.get("".concat("http://localhost:8000","/api/produits/").concat(e.target.value,"/list-produits/")).then((function(e){S(e.data)})).catch((function(e){return console.log(e.response)})),A("block")):A("none")},required:!0,children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),x.map((function(e){return Object(je.jsx)("option",{value:e._id,children:e.nom},e._id)}))]})]}),y&&Object(je.jsxs)(ue.a.Group,{controlId:"produit",style:{display:C},children:[Object(je.jsx)(ue.a.Label,{children:"produit"}),Object(je.jsxs)(ue.a.Control,{as:"select",value:D,name:"produit",onChange:function(e){return W(e)},children:[Object(je.jsx)("option",{value:"",children:"Selectionez..."}),y.map((function(e){return Object(je.jsx)("option",{value:e._id,children:e.nom},e._id)}))]})]}),Object(je.jsxs)(ue.a.Row,{children:["Autre:",Object(je.jsx)(me.a,{children:Object(je.jsxs)(ue.a.Group,{controlId:"formBasicNom",children:[Object(je.jsx)(ue.a.Label,{children:"Nom du produit: "}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Entrer le nom du nouveau produit",name:"nouveauproduit",value:B,onChange:function(e){return W(e)}})]})}),Object(je.jsx)(me.a,{children:Object(je.jsxs)(ue.a.Group,{controlId:"image",children:[Object(je.jsx)(ue.a.Label,{children:"Image"}),Object(je.jsx)(ue.a.Control,{type:"text",placeholder:"Enter image",value:F&&F.name,readonly:"readonly"}),Object(je.jsx)(ue.a.File,{id:"image-file",label:"Choose File",custom:!0,onChange:H})]})})]}),Object(je.jsxs)(ue.a.Group,{controlId:"formBasicPrix",children:[Object(je.jsx)(ue.a.Label,{children:"Prix du produit: "}),Object(je.jsx)(ue.a.Control,{type:"text",pattern:"(^[+-]?([0-9]*[.])?[0-9]+$)",step:"any",maxlength:"15",validate:"true",placeholder:"Entrer le prix du produit",name:"prix",value:M,onChange:function(e){return W(e)}})]}),Object(je.jsx)(de.a,{type:"submit",variant:"primary",children:"Ajouter produit"})]})]})})}));var at=function(e){var t=e.magasin;return Object(je.jsxs)(xe.a,{className:"my-3    rounded",children:[Object(je.jsx)(ge.Link,{to:"/marchant/magasin/".concat(t._id),children:Object(je.jsx)(xe.a.Img,{style:{height:"13rem"},variant:"top",src:"http://localhost:8000/static"+t.image})}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsx)(ge.Link,{to:"/marchant/magasin/".concat(t._id),children:Object(je.jsxs)(xe.a.Title,{as:"div",children:[Object(je.jsx)("strong",{children:t.nom}),"  ",Object(je.jsxs)("p",{children:[" ",Object(je.jsxs)("strong",{children:[" ",t.categorie]})]})]})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsx)("div",{className:"my-3",children:Object(je.jsx)(fe,{value:t.rating,text:"".concat(t.numReviews," avis"),color:"#f8e825"})})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsxs)("strong",{children:[Object(je.jsx)("i",{class:"fas fa-map-marker-alt"})," ",Object(je.jsx)("p",{children:Object(je.jsxs)("strong",{children:[t.commune&&t.commune.wilaya," ",t.commune&&t.commune.nom," ",t.adresse]})})]})})]})]})};var nt=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.history,a=e.user,r=e.isAuthenticated,c=Object(j.c)(),s=Object(j.d)((function(e){return e.magasinListMarchant})),i=s.error,o=s.loading,l=s.magasins,u=s.page,d=s.pages,p=t.location.search;return Object(n.useEffect)((function(){c(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(h.a)(b.a.mark((function t(a){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:K}),n={headers:{"Content-type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},t.next=5,O.a.get("".concat("http://localhost:8000","/api/magasins/marchant").concat(e),n);case 5:r=t.sent,c=r.data,a({type:X,payload:c}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:Y,payload:t.t0.response&&t.t0.response.data.detail?t.t0.response.data.detail:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(p))}),[c,p]),(0==r||a&&!a.is_merchant)&&t.replace("/"),Object(je.jsxs)("div",{children:[Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Vos magasins"}),Object(je.jsxs)(ge.Link,{to:"/create-magasin/",children:["  ",Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Ajouter un nouveau magasin"})]}),o?Object(je.jsx)(we,{}):i?Object(je.jsx)(Ae,{variant:"danger",children:i}):Object(je.jsxs)("div",{children:[Object(je.jsx)(he.a,{children:l.map((function(e){return Object(je.jsx)(me.a,{className:"col-lg-4 d-flex align-items-stretch",sm:12,md:6,lg:4,xl:3,children:Object(je.jsx)(at,{magasin:e})},e._id)}))}),Object(je.jsx)(Ie,{page:u,pages:d,screen:"marchant"})]})]})}));var rt=function(e){var t=e.produit,a=Object(n.useState)(!1),r=Object(i.a)(a,2),c=r[0],s=r[1],o=Object(n.useState)(t.prix),l=Object(i.a)(o,2),u=l[0],d=l[1],j=function(){var e=Object(h.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("etes vous sure de vouloir supprimer ce profuit?")){e.next=17;break}return a.preventDefault(),e.prev=2,n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=6,O.a.delete("".concat("http://localhost:8000","/api/produits/delete/").concat(t._id),n);case 6:r=e.sent,r.data,s(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),s(!1),console.log(e.t0);case 15:e.next=18;break;case 17:s(!1);case 18:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(h.a)(b.a.mark((function e(a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=5,O.a.put("".concat("http://localhost:8000","/api/produits/update/").concat(t._id),{prix:u},n);case 5:r=e.sent,r.data,s(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),s(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(je.jsx)("div",{children:c?Object(je.jsx)(we,{}):Object(je.jsxs)(xe.a,{className:"my-3    rounded",children:[Object(je.jsx)(xe.a.Img,{variant:"top",src:"http://localhost:8000/static"+t.produit_nom.image,style:{height:"15vw"}}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsx)(xe.a.Title,{as:"div",children:Object(je.jsx)("strong",{children:t.produit_nom.nom})}),Object(je.jsx)(xe.a.Text,{as:"div",children:Object(je.jsxs)("strong",{children:[Object(je.jsx)("i",{class:"fas fa-money-bill-wave"})," ",Object(je.jsxs)("strong",{children:[t.prix," DA "]})]})}),Object(je.jsx)(ue.a,{onSubmit:function(e){return p(e)},children:Object(je.jsxs)(ue.a.Row,{children:[Object(je.jsx)(me.a,{sm:5,children:Object(je.jsx)(ue.a.Control,{type:"text",pattern:"(^[+-]?([0-9]*[.])?[0-9]+$)",step:"any",maxlength:"15",validate:"true",placeholder:"Entrer le prix du produit",name:"prix",value:u,onChange:function(e){return d(e.target.value)},required:!0})}),Object(je.jsx)(me.a,{children:Object(je.jsx)(de.a,{type:"submit",variant:"primary",size:"sm",className:"btn btn-dark my-2",children:"modifier prix"})})]})}),Object(je.jsx)(de.a,{className:"btn btn-dark my-3",onClick:function(e){return j(e)},block:!0,children:Object(je.jsx)("i",{class:"fas fa-trash-alt"})})]})]})})},ct={superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:5},desktop:{breakpoint:{max:3e3,min:1024},items:3},tablet:{breakpoint:{max:1024,min:464},items:2},mobile:{breakpoint:{max:464,min:0},items:1}};var st=Object(j.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user}}))((function(e){var t=e.match,a=e.history,r=e.user,c=e.isAuthenticated,s=Object(j.c)(),o=Object(j.d)((function(e){return e.magasinDetails})),l=o.loading,u=o.error,d=o.magasin,p=Object(n.useState)(!1),m=Object(i.a)(p,2),x=m[0],f=m[1],g=function(){var e=Object(h.a)(b.a.mark((function e(a){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("etes vous sure de vouloir supprimer ce magasin?")){e.next=18;break}return a.preventDefault(),e.prev=2,n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access"))}},e.next=6,O.a.delete("".concat("http://localhost:8000","/api/magasins/delete/").concat(t.params.id),n);case 6:c=e.sent,c.data,f(!1),r&&(r.is_merchant?window.location.replace("/marchant/magasinslist"):window.location.replace("/")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),f(!1),console.log(e.t0);case 16:e.next=19;break;case 18:f(!1);case 19:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s(Ne(t.params.id))}),[s,d,t]),(0==c||r&&d.user&&r&&d.user!==r.id)&&a.replace("/"),Object(je.jsxs)("div",{children:[Object(je.jsxs)(ge.Link,{to:"/marchant/magasinslist",children:["  ",Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Retour a la liste principale"})]}),Object(je.jsxs)(ge.Link,{to:"/update-magasin/".concat(t.params.id),children:["  ",Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"Modifier le magasin"})]}),Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",onClick:function(e){return g(e)},block:!0,children:Object(je.jsx)("i",{class:"fas fa-trash-alt"})}),l||x?Object(je.jsx)(we,{}):u?Object(je.jsx)(Ae,{variant:"danger",children:u}):Object(je.jsxs)("div",{children:[Object(je.jsxs)(he.a,{children:[Object(je.jsx)(me.a,{md:7,children:Object(je.jsx)(Fe.a,{src:"http://localhost:8000/static"+d.image,alt:d.nom,fluid:!0})}),Object(je.jsx)(me.a,{md:5,children:Object(je.jsxs)(xe.a,{border:"light",style:{width:"100%"},children:[Object(je.jsx)(xe.a.Header,{children:Object(je.jsx)("h3",{children:d.nom})}),Object(je.jsxs)(xe.a.Body,{children:[Object(je.jsxs)(xe.a.Title,{children:[Object(je.jsx)("strong",{children:"Cat\xe9gorie : "}),d.categorie&&d.categorie.nom]}),Object(je.jsxs)(Ue.a,{variant:"flush",children:[Object(je.jsx)(Ue.a.Item,{className:"pl-0",children:Object(je.jsx)(fe,{value:d.rating,text:"".concat(d.numReviews," avis"),color:"#f8e825"})}),Object(je.jsxs)(Ue.a.Item,{className:"pl-0",children:[Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("strong",{children:"Wilaya:"}),d.commune&&d.commune.wilaya]}),Object(je.jsx)("br",{}),Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("strong",{children:"Comune:"})," ",d.commune&&d.commune.nom]}),Object(je.jsx)("br",{}),Object(je.jsx)("i",{class:"fas fa-map-marker-alt",children:" "})," ",Object(je.jsx)("span",{style:{color:"black"},children:Object(je.jsx)("strong",{children:d.adresse})})]}),Object(je.jsx)(Ue.a.Item,{className:"pl-0",children:Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-phone-alt"}),d.telephone]})}),Object(je.jsxs)(Ue.a.Item,{className:"pl-0",children:[Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-door-open"}),d.overture]}),Object(je.jsx)("br",{}),Object(je.jsxs)("span",{style:{color:"black"},children:[Object(je.jsx)("i",{class:"fas fa-door-closed"}),d.fermeture]})]})]})]})]})})]}),Object(je.jsxs)(ge.Link,{to:"/ajouter-produit/".concat(t.params.id),children:["  ",Object(je.jsx)(de.a,{className:"btn btn-dark my-3",size:"md",block:!0,children:"ajouter un produit dans le magasin"})]}),d.produits?Object(je.jsx)(Le.a,{responsive:ct,children:d.produits.map((function(e){return Object(je.jsx)(me.a,{md:11,children:Object(je.jsx)(rt,{produit:e})},e._id)}))}):null,Object(je.jsxs)(ze.a,{className:"my-3",center:[d.latitude?d.latitude:0,d.longitude?d.longitude:0],zoom:10,scrollWheelZoom:!1,children:[Object(je.jsx)(De.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(je.jsx)(Me.a,{position:[d.latitude?d.latitude:0,d.longitude?d.longitude:0],children:Object(je.jsx)(Be.a,{children:d.nom})})]})]})]})})),it=Object(j.b)(null,{checkAuthenticated:function(){return function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return a={headers:{"Content-Type":"application/json",Accept:"application/json"}},n=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,O.a.post("".concat("http://localhost:8000","/auth/jwt/verify/"),n,a);case 6:"token_not_valid"!==e.sent.data.code?t({type:y}):t({type:S}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:S});case 13:e.next=16;break;case 15:t({type:S});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},load_user:re})((function(e){e.match;var t=e.checkAuthenticated,a=e.load_user,r=e.children,c=Object(le.k)();return Object(n.useEffect)((function(){t(),a(),c.listen((function(e){t(),a()}))}),[]),Object(je.jsxs)("div",{children:[Object(je.jsx)(be,{}),Object(je.jsx)("main",{className:"py-3",children:Object(je.jsx)(u.a,{children:r})}),Object(je.jsx)(Oe,{})]})})),ot=a(41),lt=a(78),ut=a(79),dt={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null,error:null,message:null},jt=Object(ot.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case x:return localStorage.setItem("access",n.access),localStorage.setItem("refresh",n.refresh),Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh,error:null});case g:return Object(Ve.a)(Object(Ve.a)({},e),{},{user:n});case v:return Object(Ve.a)(Object(Ve.a)({},e),{},{user:null});case f:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Ve.a)(Object(Ve.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:t.payload});case y:return Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!0});case S:return Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!1});case k:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Ve.a)(Object(Ve.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:null});case C:case E:return Object(Ve.a)(Object(Ve.a)({},e),{},{message:t.payload});case w:case A:return Object(Ve.a)(Object(Ve.a)({},e),{},{error:t.payload});case _:return Object(Ve.a)(Object(Ve.a)({},e),{},{message:null});case I:return Object(Ve.a)(Object(Ve.a)({},e),{},{error:null});case N:return Object(Ve.a)(Object(Ve.a)({},e),{},{message:t.payload});case T:return Object(Ve.a)(Object(Ve.a)({},e),{},{error:t.payload});case L:return Object(Ve.a)(Object(Ve.a)({},e),{},{isAuthenticated:!1,message:t.payload});case R:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(Ve.a)(Object(Ve.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null,error:t.payload});default:return e}},magasinList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{magasins:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{loading:!0,magasins:[]};case z:return{loading:!1,magasins:t.payload.magasins,page:t.payload.page,pages:t.payload.pages,rec1:t.payload.rec1,rec2:t.payload.rec2};case D:return{loading:!1,error:t.payload};default:return e}},magasinDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{magasin:{reviews:[],produits:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(Ve.a)({loading:!0},e);case B:return{loading:!1,magasin:t.payload};case F:return{loading:!1,error:t.payload};default:return e}},magasinReviewCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{loading:!0};case W:return{loading:!1,success:!0};case P:return{loading:!1,error:t.payload};case q:return{};case J:return Object(Ve.a)(Object(Ve.a)({},e),{},{success:!1});case V:return{error:null};default:return e}},magasinVisiteCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{loading:!0};case H:return{loading:!1,success:!0};case Z:return{loading:!1,error:t.payload};case $:return{};default:return e}},magasinListMarchant:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{magasins:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return{loading:!0,magasins:[]};case X:return{loading:!1,magasins:t.payload.magasins,page:t.payload.page,pages:t.payload.pages};case Y:return{loading:!1,error:t.payload};default:return e}},magasinRequeteCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return{loading:!0};case te:return{loading:!1,success:!0};case ae:return{loading:!1,error:t.payload};case ne:return{};default:return e}}}),pt=[ut.a],bt=Object(ot.createStore)(jt,{},Object(lt.composeWithDevTools)(ot.applyMiddleware.apply(void 0,pt)));var ht=function(){return Object(je.jsx)(j.a,{store:bt,children:Object(je.jsx)(ge.BrowserRouter,{children:Object(je.jsx)(it,{children:Object(je.jsxs)(le.g,{children:[Object(je.jsx)(le.d,{path:"/",component:Ge,exact:!0}),Object(je.jsx)(le.d,{path:"/magasin/:keyword/:id",component:qe}),Object(je.jsx)(le.d,{path:"/login",component:Qe}),Object(je.jsx)(le.d,{path:"/activate/:uid/:token",component:Xe}),Object(je.jsx)(le.d,{path:"/signup",component:He}),Object(je.jsx)(le.d,{path:"/reset-password",component:$e}),Object(je.jsx)(le.d,{path:"/password/reset/confirm/:uid/:token",component:Ke}),Object(je.jsx)(le.d,{path:"/create-magasin",component:Ye}),Object(je.jsx)(le.d,{path:"/update-magasin/:id",component:et}),Object(je.jsx)(le.d,{path:"/marchant/magasinslist",component:nt}),Object(je.jsx)(le.d,{path:"/marchant/magasin/:id",component:st}),Object(je.jsx)(le.d,{path:"/ajouter-produit/:id",component:tt})]})})})})},mt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,150)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))};a(130);s.a.render(Object(je.jsx)(r.a.StrictMode,{children:Object(je.jsx)(ht,{})}),document.getElementById("root")),mt()},88:function(e,t,a){},89:function(e,t,a){}},[[131,1,2]]]);
//# sourceMappingURL=main.73f96896.chunk.js.map